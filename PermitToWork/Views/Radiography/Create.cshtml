@model PermitToWork.Models.Radiography.RadEntity
@{
    bool[] isCanEdit = ViewBag.isCanEdit as bool[];
    PermitToWork.Models.User.UserEntity requestor = Session["user"] as PermitToWork.Models.User.UserEntity;
}
<script>
    $(document).ready(function () {
        addHandlerMenu();

        if ($('input[name="radiographic-source"]:checked').val() == 0) {
            @if (isCanEdit[0])
            {
                <text>$('#radiographic-source-other').removeAttr('disabled');</text>
            }
        }

        $('input[name="radiographic-source"]').change(function () {
            if ($(this).val() == 0) {
                $('#radiographic-source-other').removeAttr('disabled');
            } else {
                $('#radiographic-source-other').attr('disabled', 'disabled');
            }
        })

        $("#file-radiographer-2").kendoUpload({
            async: {
                saveUrl: "@Url.Action("saveLicenseNumber", "Radiography", new { type = 2 })",
                removeUrl: "@Url.Action("removeLicenseNumber", "Radiography", new { type = 2 })",
                autoUpload: true
            },
            upload: onUpload,
            remove: onRemove,
            success: onSuccess2,
        });

        $("#file-radiographer-1").kendoUpload({
            async: {
                saveUrl: "@Url.Action("saveLicenseNumber", "Radiography", new { type = 1 })",
                removeUrl: "@Url.Action("removeLicenseNumber", "Radiography", new { type = 1 })",
                autoUpload: true,
            },
            upload: onUpload,
            remove: onRemove,
            success: onSuccess1,
        });

        $("#file-radiation-protection-officer").kendoUpload({
            async: {
                saveUrl: "@Url.Action("saveLicenseNumber", "Radiography", new { type = 3 })",
                removeUrl: "@Url.Action("removeLicenseNumber", "Radiography", new { type = 3 })",
                autoUpload: true,
            },
            upload: onUpload,
            remove: onRemove,
            success: onSuccessRPO,
        });

        $("#file-attachment").kendoUpload({
            async: {
                saveUrl: "@Url.Action("saveLicenseNumber", "Radiography", new { type = 4 })",
                removeUrl: "@Url.Action("removeLicenseNumber", "Radiography", new { type = 4 })",
                autoUpload: true,
            },
            upload: onUpload,
            remove: onRemove,
            success: onSuccessAttachment,
        });

        $fileList = $("#existing-files-license-number-1");

        if ($fileList.length > 0) {
            $("#file-radiographer-1").parent().parent().parent('div.k-upload').append($fileList);
            $files = $(".k-file");
            _fn = function (item) {
                var $item, fileId, filenames;
                $item = $(item);
                fileId = $item.data("att-id");
                filenames = [
                  {
                      name: fileId
                  }
                ];
                return $item.data("fileNames", filenames);
            };
            for (_i = 0, _len = $files.length; _i < _len; _i++) {
                item = $files[_i];
                _fn(item);
            }
            $fileList.show();
        }

        $fileList = $("#existing-files-license-number-2");

        if ($fileList.length > 0) {
            $("#file-radiographer-2").parent().parent().parent('div.k-upload').append($fileList);
            $files = $(".k-file");
            _fn = function (item) {
                var $item, fileId, filenames;
                $item = $(item);
                fileId = $item.data("att-id");
                filenames = [
                  {
                      name: fileId
                  }
                ];
                return $item.data("fileNames", filenames);
            };
            for (_i = 0, _len = $files.length; _i < _len; _i++) {
                item = $files[_i];
                _fn(item);
            }
            $fileList.show();
        }

        $fileList = $("#existing-files-license-number-rpo");

        if ($fileList.length > 0) {
            $("#file-radiation-protection-officer").parent().parent().parent('div.k-upload').append($fileList);
            $files = $(".k-file");
            _fn = function (item) {
                var $item, fileId, filenames;
                $item = $(item);
                fileId = $item.data("att-id");
                filenames = [
                  {
                      name: fileId
                  }
                ];
                return $item.data("fileNames", filenames);
            };
            for (_i = 0, _len = $files.length; _i < _len; _i++) {
                item = $files[_i];
                _fn(item);
            }
            $fileList.show();
        }

        $fileList = $("#existing-files-attachment");

        if ($fileList.length > 0) {
            $("#file-attachment").parent().parent().parent('div.k-upload').append($fileList);
            $files = $(".k-file");
            _fn = function (item) {
                var $item, fileId, filenames;
                $item = $(item);
                fileId = $item.data("att-id");
                filenames = [
                  {
                      name: fileId
                  }
                ];
                return $item.data("fileNames", filenames);
            };
            for (_i = 0, _len = $files.length; _i < _len; _i++) {
                item = $files[_i];
                _fn(item);
            }
            $fileList.show();
        }

        function onUpload(e) {
            // Array with information about the uploaded files
            var files = e.files;

            // Check the extension of each file and abort the upload if it is not .jpg
            $.each(files, function () {
                if (this.extension != ".pdf") {
                    //alert("Only .pdf files can be uploaded.")
                    //e.preventDefault();
                }
            });
            e.data = { id: '@Model.id' };
        }

        function onRemove(e) {
            e.data = { id: '@Model.id' };
        }

        function onSuccess1(e) {
            var files = e.files;
            // Check the extension of each file and abort the upload if it is not .jpg
            $.each(files, function () {
                $('.k-filename[title="' + this.name + '"]').html('<a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/LicenseNumber1")' + this.name + '">' + this.name + '</a>');
            });
        }

        function onSuccess2(e) {
            var files = e.files;
            // Check the extension of each file and abort the upload if it is not .jpg
            $.each(files, function () {
                $('.k-filename[title="' + this.name + '"]').html('<a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/LicenseNumber2")' + this.name + '">' + this.name + '</a>');
            });
        }

        function onSuccessRPO(e) {
            var files = e.files;
            // Check the extension of each file and abort the upload if it is not .jpg
            $.each(files, function () {
                $('.k-filename[title="' + this.name + '"]').html('<a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/LicenseNumberRPO")' + this.name + '">' + this.name + '</a>');
            });
        }

        function onSuccessAttachment(e) {
            var files = e.files;
            // Check the extension of each file and abort the upload if it is not .jpg
            $.each(files, function () {
                $('.k-filename[title="' + this.name + '"]').html('<a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/Attachment")' + this.name + '">' + this.name + '</a>');
            });
        }

        @if (!isCanEdit[0])
        {
        <text>
        $('#file-radiographer-2').data("kendoUpload").disable();
        $('#file-radiographer-1').data("kendoUpload").disable();
        $('#file-radiation-protection-officer').data("kendoUpload").disable();
        $('#file-attachment').data("kendoUpload").disable();
        </text>
        }

        function startChange() {
            var startDate = start.value();

            if (startDate) {
                startDate = new Date(startDate);
                startDate.setDate(startDate.getDate());
                end.min(startDate);
            }
        }

        function endChange() {
            var endDate = end.value();

            if (endDate) {
                endDate = new Date(endDate);
                endDate.setDate(endDate.getDate());
                start.max(endDate);
            }
        }

        var start = $("#estimate-time-start").kendoDateTimePicker({
            change: startChange,
            parseFormats: ["MM/dd/yyyy"]
        }).data("kendoDateTimePicker");

        var end = $("#estimate-time-end").kendoDateTimePicker({
            change: endChange,
            parseFormats: ["MM/dd/yyyy"]
        }).data("kendoDateTimePicker");

        start.max(end.value());
        end.min(start.value());

        @if (!isCanEdit[0]) {
            <text>$('#estimate-time-start').data("kendoDateTimePicker").enable(false);
            $('#estimate-time-end').data("kendoDateTimePicker").enable(false);</text>
        }

        $('#save-as-draft').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getPreScreeningValues(values, values.who);
            $('#loading_gif').show();
            $.post('@Url.Action("saveAsDraft", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                alert('Save success.');
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });
        });

        $('#save-send').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getPreScreeningValues(values, values.who);

            if (values.who == "1") {
                if (values.radiographer_2 == null || values.radiographer_1 == null || values.radiation_protection_officer == null) {
                    alert('Radiographer Level 2, Radiographer Level 1, and Radiation Protection Officer must be chosen.');

                    return;
                }
            }

            var r = true;

            if (values.who == "4") {
                if (values.pre_screening_spv.indexOf("2") < 0 && values.pre_screening_spv.indexOf("1") < 0) {
                    r = confirm("Are you sure that all pre job screening values are 'N/A'? Please change the value if it's not true.");
                }
                if (r) {
                    if (values.pre_screening_spv.indexOf("2") >= 0) {
                        if (values.pre_remark.indexOf("Spv:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'Spv:\'');
                            $('#pre_remark_required').show();
                            $('#pre_remark_required').html('Notes must be added. Start with \'Spv:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            } else if (values.who == "3") {
                if (values.pre_screening_rad.indexOf("2") < 0 && values.pre_screening_rad.indexOf("1") < 0) {
                    r = confirm("Are you sure that all pre job screening values are 'N/A'? Please change the value if it's not true.");
                }
                if (r) {
                    if (values.pre_screening_rad.indexOf("2") >= 0) {
                        console.log(values.pre_remark);
                        if (values.pre_remark.indexOf("Rad:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'Rad:\'');
                            $('#pre_remark_required').show();
                            $('#pre_remark_required').html('Notes must be added. Start with \'Rad:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            } else if (values.who == "6") {
                if (values.pre_screening_fo.indexOf("2") < 0 && values.pre_screening_fo.indexOf("1") < 0) {
                    r = confirm("Are you sure that all pre job screening values are 'N/A'? Please change the value if it's not true.");
                }
                if (r) {
                    if (values.pre_screening_fo.indexOf("2") >= 0) {
                        if (values.pre_remark.indexOf("FO:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'FO:\'');
                            $('#pre_remark_required').show();
                            $('#pre_remark_required').html('Notes must be added. Start with \'FO:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            }
            $('#loading_gif').show();
            $.post('@Url.Action("saveAndSend", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert('Radiography Clearance Permit is saved and approved.');
                    $('#content').load('@Url.Action("Edit", "Radiography")');
                } else if (resp.status == "400") {
                    alert('Something wrong! Please try again.');
                } else if (resp.status == "404") {
                    alert('Save success. Because Supervisor has not accept as supervisor from email, you must wait until supervisor is assigned, and try to send again.');
                }
            });
        });

        $('#save-so').click(function () {
            var values = getValues();
            values.safety_officer = $('#safety_officer').val();
            $('#loading_gif').show();
            $.post('@Url.Action("assignSafetyOfficer", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert('Save success. Notification has been sent to Safety Officer.');
                    $('#content').load('@Url.Action("Edit", "Radiography")');
                } else if (resp.status == "400") {
                    alert('Something wrong! Please try again.');
                }
            });
        });

        $('#save-as-draft-2').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getCancelScreeningValues(values, values.who);
            $('#loading_gif').show();
            $.post('@Url.Action("saveAsDraftCancel", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                alert('Save success.');
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });
        });

        $('#save-send-2').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getCancelScreeningValues(values, values.who);
            var r = true;

            if (who == "4") {
                if (values.can_screening_spv.indexOf("2") < 0 && values.can_screening_spv.indexOf("1") < 0) {
                    r = confirm("Are you sure that all pre job screening values are 'N/A'? Please change the value if it's not true.");
                }
                if (r) {
                    if (values.can_screening_spv.indexOf("2") >= 0) {
                        if (values.can_remark.indexOf("Spv:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'Spv:\'');
                            $('#can_remark_required').show();
                            $('#can_remark_required').html('Notes must be added. Start with \'Spv:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            } else if (who == "3") {
                if (values.can_screening_rad.indexOf("2") < 0 && values.can_screening_rad.indexOf("1") < 0) {
                    r = confirm("Are you sure that all pre job screening values are 'N/A'? Please change the value if it's not true.");
                }
                if (r) {
                    if (values.can_screening_rad.indexOf("2") >= 0) {
                        console.log(values.pre_remark);
                        if (values.can_remark.indexOf("Rad:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'Rad:\'');
                            $('#can_remark_required').show();
                            $('#can_remark_required').html('Notes must be added. Start with \'Rad:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            } else if (who == "6") {
                if (values.can_screening_fo.indexOf("2") < 0 && values.can_screening_fo.indexOf("1") < 0) {
                    r = confirm("Are you sure that all pre job screening values are 'N/A'? Please change the value if it's not true.");
                }
                if (r) {
                    if (values.can_screening_fo.indexOf("2") >= 0) {
                        if (values.can_remark.indexOf("FO:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'FO:\'');
                            $('#can_remark_required').show();
                            $('#can_remark_required').html('Notes must be added. Start with \'FO:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            }
            $('#loading_gif').show();
            $.post('@Url.Action("saveAndSendCancel", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert('Radiography Clearance Permit Cancellation is saved and approved.');
                    $('#content').load('@Url.Action("Edit", "Radiography")');
                } else if (resp.status == "400") {
                    alert('Something wrong! Please try again.');
                } else if (resp.status == "404") {
                    alert('Save success. Because Supervisor has not accept as supervisor from email, you must wait until supervisor is assigned, and try to send again.');
                }
            });
        });

        $('#reject').click(function () {
            $('#type-reject').val(1);
            $('#who').val($(this).data("who"));
            $('#rejection').modal('show');
        });

        $('#reject-2').click(function () {
            $('#type-reject').val(2);
            $('#who').val($(this).data("who"));
            $('#rejection').modal('show');
        });

        $('#reject_button').click(function () {
            var values = {
                id: '@Model.id',
                comment: $('#comment').val(),
            }
            values = getPreScreeningValues(values, $('#who').val());
            var type = $('#type-reject').val();
            var url = '';
            switch (type) {
                case "1": values.who = $('#who').val(); url = '@Url.Action("rejectPermit", "Radiography")'; break;
                case "2": values.who = $('#who').val(); url = '@Url.Action("rejectPermitCancel", "Radiography")'; break;
            }
            $('#loading_reject').show();
            $.post(url, values, function (resp) {
                $('#loading_reject').hide();
                $('#rejection').modal('hide');
                alert('Radiography clearance permit is rejected.');
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });

        });

        @*$('.start-accept').click(function () {
            var values = {
                id: '@Model.id',
                who: $(this).data('who'),
            }

            $.post('@Url.Action("SignStartPermit", "Radiography")', values, function (resp) {
                if (resp.status == "200") {
                    alert(resp.message);
                }
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });
        });*@

        $('#closing').click(function () {
            var values = {
                id: '@Model.id',
            }
            $('#loading_gif').show();
            $.post('@Url.Action("CancelRadPermit", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert("Radiography Clearance Permit Cancelled. Notification has been sent to supervisor for cancellation screening.");
                }
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });
        });

        @*$('#save-as-draft-3').click(function () {
            var values = getValues();
            var who = $('#save-send-3').data("who");
            values.who = who;
            values = getCancelScreeningValues(values, who);
            $('#loading_gif').show();
            $.post('@Url.Action("saveAsDraftCancelScreening", "Radiography")', values, function (resp) {
                $('#loading_gif').hide();
                alert('Save success.');
                $('#content').load('@Url.Action("Edit", "Radiography")');
                //if (who == "1") {
                //    alert('Save success. Notification has been sent to Radiographer Level 2 for Pre-job screening.');
                //} else if (who == "2") {
                //    alert('Save success. Notification has been sent to Facility Owner for Pre-job screening.');
                //} else if (who == "3") {
                //    alert('Save success. Notification has been sent to Operator for Approving.');
                //}
            });
        });

        $('#save-send-3').click(function () {
            var values = getValues();
            var who = $('#save-send-3').data("who");
            values.who = who;
            values = getCancelScreeningValues(values, who);

            if (who == "1") {
                if (values.can_screening_spv.indexOf("2") >= 0) {
                    if (values.can_remark.indexOf("Spv:") < 0) {
                        alert('Screening contains one or more \'no\'. Please add Notes start with \'Spv:\'');
                        $('#can_remark_required').show();
                        $('#can_remark_required').html('Notes must be added. Start with \'Spv:\'');

                        return;
                    }
                }
            } else if (who == "2") {
                if (values.can_screening_rad.indexOf("2") >= 0) {
                    console.log(values.pre_remark);
                    if (values.can_remark.indexOf("Rad:") < 0) {
                        alert('Screening contains one or more \'no\'. Please add Notes start with \'Rad:\'');
                        $('#can_remark_required').show();
                        $('#can_remark_required').html('Notes must be added. Start with \'Rad:\'');

                        return;
                    }
                }
            } else if (who == "3") {
                if (values.can_screening_fo.indexOf("2") >= 0) {
                    if (values.can_remark.indexOf("FO:") < 0) {
                        alert('Screening contains one or more \'no\'. Please add Notes start with \'FO:\'');
                        $('#can_remark_required').show();
                        $('#can_remark_required').html('Notes must be added. Start with \'FO:\'');

                        return;
                    }
                }
            }
            $('#loading_gif').show();
            $.post('@Url.Action("saveCompleteCancelScreening", "Radiography")', values, function (resp) {
                // alert('Save success.');
                $('#loading_gif').hide();
                if (who == "1") {
                    alert('Save success. Notification has been sent to Radiographer Level 2 for cancellation screening.');
                } else if (who == "2") {
                    alert('Save success. Notification has been sent to Facility Owner for cancellation screening.');
                } else if (who == "3") {
                    alert('Save success. Notification has been sent to Operator for cancellation approval.');
                }
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });
        });

        $('#reject-3').click(function () {
            $('#type-reject').val(2);
            $('#who').val($('#save-send-3').data("who"));
            $('#rejection').modal('show');
        });

        $('.cancel-accept').click(function () {
            var values = {
                id: '@Model.id',
                who: $(this).data('who'),
            }

            $.post('@Url.Action("SignCancelPermit", "Radiography")', values, function (resp) {
                if (resp.status == "200") {
                    alert(resp.message);
                }
                $('#content').load('@Url.Action("Edit", "Radiography")');
            });
        });*@

        $('#back').click(function () {
            var history = $('#history').val();
            history = history.toLowerCase();
            if (history.indexOf('home') >= 0) {
                window.location = history;
            } else if (history == "") {
                window.location = '@Url.Action("Index","Home")';
            } else {
                $('#content').load(history);
            }
        });

        $('#radiographer-2').change(function () {
            $.post('@Url.Action("getLicenseNumber", "Radiography")', { id: $(this).val() }, function (resp) {
                $('#radiographer-2-license-number').val(resp.data);
            });
        });

        $('#radiographer-1').change(function () {
            $.post('@Url.Action("getLicenseNumber", "Radiography")', { id: $(this).val() }, function (resp) {
                $('#radiographer-1-license-number').val(resp.data);
            });
        });

        $('#radiation-protection-officer').change(function () {
            $.post('@Url.Action("getLicenseNumberRPO", "Radiography")', { id: $(this).val() }, function (resp) {
                $('#radiation-protection-officer-license-number').val(resp.data);
            });
        });

        function getPreScreeningValues(values, who) {
            var pre_screening_arr = [];
            if (who == "4") {
                $('.pre-screening-spv').each(function () {
                    var i = $(this).data("id");
                    pre_screening_arr[i] = $(this).val();
                });

                var s = "";

                for (var i = 0; i < 14; i++) {
                    s += pre_screening_arr[i] + "#";
                }

                s = s.substr(0, s.length - 1);
                values.pre_screening_spv = s;
            } else if (who == "3") {
                $('.pre-screening-rad').each(function () {
                    var i = $(this).data("id");
                    pre_screening_arr[i] = $(this).val();
                });

                var s = "";

                for (var i = 0; i < 14; i++) {
                    s += pre_screening_arr[i] + "#";
                }

                s = s.substr(0, s.length - 1);
                values.pre_screening_rad = s;
            } else if (who == "6") {
                $('.pre-screening-fo').each(function () {
                    var i = $(this).data("id");
                    pre_screening_arr[i] = $(this).val();
                });

                var s = "";

                for (var i = 0; i < 14; i++) {
                    s += pre_screening_arr[i] + "#";
                }

                s = s.substr(0, s.length - 1);
                values.pre_screening_fo = s;

                values.safety_officer = $('#safety_officer').val();
            }

            values.pre_remark = $('#pre_remark').val();
            return values;
        }

        function getCancelScreeningValues(values, who) {
            var can_screening_arr = [];
            if (who == "4") {
                $('.can-screening-spv').each(function () {
                    var i = $(this).data("id");
                    can_screening_arr[i] = $(this).val();
                });

                var s = "";

                for (var i = 0; i < 3; i++) {
                    s += can_screening_arr[i] + "#";
                }

                s = s.substr(0, s.length - 1);
                values.can_screening_spv = s;
            } else if (who == "3") {
                $('.can-screening-rad').each(function () {
                    var i = $(this).data("id");
                    can_screening_arr[i] = $(this).val();
                });

                var s = "";

                for (var i = 0; i < 3; i++) {
                    s += can_screening_arr[i] + "#";
                }

                s = s.substr(0, s.length - 1);
                values.can_screening_rad = s;
            } else if (who == "6") {
                $('.can-screening-fo').each(function () {
                    var i = $(this).data("id");
                    can_screening_arr[i] = $(this).val();
                });

                var s = "";

                for (var i = 0; i < 3; i++) {
                    s += can_screening_arr[i] + "#";
                }

                s = s.substr(0, s.length - 1);
                values.can_screening_fo = s;
            }

            values.can_remark = $('#can_remark').val();
            return values;
        }

        function getValues() {
            var values = {
                id: '@Model.id',
                purpose: $('#purpose').val(),
                work_location: $('#work-location').val(),
                radiographer_2: $('#radiographer-2').val(),
                radiographer_2_license_number: $('#radiographer-2-license-number').val(),
                radiographer_1: $('#radiographer-1').val(),
                radiographer_1_license_number: $('#radiographer-1-license-number').val(),
                radiation_protection_officer: $('#radiation-protection-officer').val(),
                radiation_protection_officer_license_number: $('#radiation-protection-officer-license-number').val(),
                potential_area_affected: $('#potential-area-affected').val(),
                total_crew: $('#total-crew').val(),
                radiographic_source: $('input[name="radiographic-source"]:checked').val() != "0" ? $('input[name="radiographic-source"]:checked').val() : $('#radiographic-source-other').val(),
                estimate_time_start: $('#estimate-time-start').val(),
                estimate_time_end: $('#estimate-time-end').val(),
            };
            return values;
        }


    })
</script>

<div id="content-header">
	<h1>Radiography</h1>
</div>
<div id="breadcrumb">
	<a href="#" title="Go to Home" class="tip-bottom home"><i class="icon-home"></i> Home</a>
	<a href="#"  class="tip-bottom ptw">Radiography </a>
    <a href="#" class="current">@Model.rg_no</a>
</div>

<div class="container-fluid header-form">
    <div class="row-fluid">
        <div class="span3 logo">
            <img src="../../Img/logo-clean.png" />
        </div>
        <div class="span6 title">
            <b>RADIOGRAPHY PERMIT</b><br />
            Star Energy Geothermal (Wayang Windu) Limited
        </div>

        <div class="span3 no">
            <br />
            Permit No: @Model.rg_no
        </div>
    </div>
    <div class="row-fluid separator">
    </div>
</div>

<div class="container-fluid">
    <div class="row-fluid">
        <table class="table">
            <thead>
                <tr>
                    <th class="title-form" colspan="4"><b>1.  GENERAL INFORMATION </b></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>No </b></td>
                    <td><b>Description </b></td>
                    <td colspan="2"><b>Remark </b></td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Purpose</td>
                    <td colspan="2">: <input class="table-input table-input-600" id="purpose" type="text" value="@Model.purpose" @(isCanEdit[0] ? "" : "disabled")></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Work location</td>
                    <td colspan="2">: <input class="table-input table-input-600" id="work-location" type="text" value="@Model.work_location" @(isCanEdit[0] ? "" : "disabled")></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Radiographer Level 2 <small>(Ahli Radiographic)</small></td>
                    <td>: @Html.DropDownList("radiographer-2", ViewBag.listRadiographer2 as List<SelectListItem>, (isCanEdit[0] ? new { @class = "table-input-170" } as object : new { @class = "table-input-170", disabled = "disabled" } as object))</td>
                    <td>Licensed number: <input class="table-input table-input-120" id="radiographer-2-license-number" type="text" value="@Model.radiographer_2_license_number" disabled>&nbsp;<input name="files" id="file-radiographer-2" type="file" class="radiography-file" />
                        <ul id="existing-files-license-number-2" class="k-upload-files k-reset uploaded-files" style="display: none;">
                            @foreach (string file in Model.listDocumentUploaded[PermitToWork.Models.Radiography.RadEntity.DocumentUploaded.RADIOGRAPHER2LICENSENUMBER.ToString()])
                            {
                            <li class="k-file" data-att-id="@(file)">
                                <span class="k-icon k-success">uploaded</span>
                                <span class="k-filename" title="@(file)"><a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/LicenseNumber2/" + file)" target="_blank">@file</a><span class="k-progress"><span class="k-state-selected k-progress-status" style="width: 100%;"></span></span></span>
                                <button type="button" class="k-button k-button-icontext k-upload-action" @(isCanEdit[0] ? "" : "disabled")><span class="k-icon k-delete"></span>Remove</button>
                            </li>
                            }
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Radiographer Level 1 <small>(Operator Radiographic)</small></td>
                    <td>: @Html.DropDownList("radiographer-1", ViewBag.listRadiographer1 as List<SelectListItem>, (isCanEdit[0] ? new { @class = "table-input-170" } as object : new { @class = "table-input-170", disabled = "disabled" } as object))</td>
                    <td>Licensed number: <input class="table-input table-input-120" id="radiographer-1-license-number" type="text" value="@Model.radiographer_1_license_number" disabled>&nbsp;<input name="files" id="file-radiographer-1" type="file" class="radiography-file" />
                        <ul id="existing-files-license-number-1" class="k-upload-files k-reset uploaded-files" style="display: none;">
                            @foreach (string file in Model.listDocumentUploaded[PermitToWork.Models.Radiography.RadEntity.DocumentUploaded.RADIOGRAPHER1LICENSENUMBER.ToString()])
                            {
                            <li class="k-file" data-att-id="@(file)">
                                <span class="k-icon k-success">uploaded</span>
                                <span class="k-filename" title="@(file)"><a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/LicenseNumber1/" + file)" target="_blank">@file</a><span class="k-progress"><span class="k-state-selected k-progress-status" style="width: 100%;"></span></span></span>
                                <button type="button" class="k-button k-button-icontext k-upload-action" @(isCanEdit[0] ? "" : "disabled")><span class="k-icon k-delete"></span>Remove</button>
                            </li>
                            }
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Radiation Protection Officer </td>
                    <td>: @Html.DropDownList("radiation-protection-officer", ViewBag.listRPO as List<SelectListItem>, (isCanEdit[0] ? new { @class = "table-input-170" } as object : new { @class = "table-input-170", disabled = "disabled" } as object))</td>
                    <td>Licensed number: <input class="table-input table-input-120" id="radiation-protection-officer-license-number" type="text" value="@Model.radiation_protection_officer_license_number" disabled>&nbsp;<input name="files" id="file-radiation-protection-officer" type="file" class="radiography-file" />
                        <ul id="existing-files-license-number-rpo" class="k-upload-files k-reset uploaded-files" style="display: none;">
                            @foreach (string file in Model.listDocumentUploaded[PermitToWork.Models.Radiography.RadEntity.DocumentUploaded.RADIATIONPOLICENSENUMBER.ToString()])
                            {
                            <li class="k-file" data-att-id="@(file)">
                                <span class="k-icon k-success">uploaded</span>
                                <span class="k-filename" title="@(file)"><a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/LicenseNumberRPO/" + file)" target="_blank">@file</a><span class="k-progress"><span class="k-state-selected k-progress-status" style="width: 100%;"></span></span></span>
                                <button type="button" class="k-button k-button-icontext k-upload-action" @(isCanEdit[0] ? "" : "disabled")><span class="k-icon k-delete"></span>Remove</button>
                            </li>
                            }
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Potential Area Exposure </td>
                    <td colspan="2">: <input class="table-input table-input-600" id="potential-area-affected" type="text" value="@Model.potential_area_affected" @(isCanEdit[0] ? "" : "disabled")><br /><small><i><b>(site plan drawings that have been marked shall be attached at bottom of page)</b></i></small></td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>Total Crew Involve </td>
                    <td colspan="2">: @Html.DropDownList("total-crew", ViewBag.listTotalCrew as List<SelectListItem>, (isCanEdit[0] ? new { @class = "table-input-170" } as object : new { @class = "table-input-170", disabled = "disabled" } as object))</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>Supervisor <small><i>(project manager)</i></small> </td>
                    <td colspan="2">: <input class="table-input table-input-170" id="supervisor" type="text" value="@(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()].alpha_name : "")" disabled></td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>Type of radiographic source </td>
                    <td colspan="2">
                        <ul class="inline table-ul">
                            <li><label class="radio"><input name="radiographic-source" type="radio" value="1" @(Model.radiographic_source == "1" ? "checked" : "")  @(isCanEdit[0] ? "" : "disabled")/>X Ray</label></li>
                            <li> <label class="radio"><input name="radiographic-source" type="radio" value="2" @(Model.radiographic_source == "2" ? "checked" : "")  @(isCanEdit[0] ? "" : "disabled")/>Gamma Ray</label></li>
                            <li> <label class="radio"><input name="radiographic-source" value="0" type="radio" @(Model.radiographic_source != "1" && Model.radiographic_source != "2" && Model.radiographic_source != null ? "checked" : "")  @(isCanEdit[0] ? "" : "disabled")/>Others</label></li>
                            <li><input class="table-input table-input-170" id="radiographic-source-other" type="text" value="@(Model.radiographic_source != "1" && Model.radiographic_source != "2" ? Model.radiographic_source : "")" disabled></li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>10</td>
                    <td>Estimate time <small>(dd:mm:yyyy hh:mm)</small></td>
                    <td>From : <input id="estimate-time-start" class="datetimepicker" value="@(Model.estimate_time_start != null ? Model.estimate_time_start.Value.ToString("MM/dd/yyyy hh:mm") : "")" /></td>
                    <td>Until : <input id="estimate-time-end" class="datetimepicker" value="@(Model.estimate_time_end != null ? Model.estimate_time_end.Value.ToString("MM/dd/yyyy hh:mm") : "")" /></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row-fluid">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="title-form" colspan="6">
                        <b>2. PRE-JOB SCREENING</b> <small><i>It must be completed by certified radiographer Level 2. If any of the below can't be satisfied the work will not be permitted. Project manager acknowledge at the ack column as agreement with hazard screening. 
                            Fill : yes if agree, no if disagree, N/A if not applicable with statement on description column; Spv : Supervisor; Rad : Radiographic engineer / level-2; FO : facility owner</i></small>
                    </th>
                    
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>No</strong></td>
                    <td><strong>Description</strong></td>
                    <td><strong>SPV</strong></td>
                    <td><strong>RAD</strong></td>
                    <td><strong>FO</strong></td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Warning sign will be posted around relevant potential area of exposure <small>(attached copy sample of sign if there apply)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="0" id="pre-screening-spv-1" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[0] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[0] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[0] == "0" || Model.screening_spv_arr[0] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="0" id="pre-screening-rad-1" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[0] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[0] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[0] == "0" || Model.screening_rad_arr[0] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="0" id="pre-screening-fo-1" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[0] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[0] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[0] == "0" || Model.screening_fo_arr[0] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Safety line will be provided at working area boundary</td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="1" id="pre-screening-spv-2" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[1] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[1] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[1] == "0" || Model.screening_spv_arr[1] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="1" id="pre-screening-rad-2" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[1] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[1] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[1] == "0" || Model.screening_rad_arr[1] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="1" id="pre-screening-fo-2" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[1] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[1] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[1] == "0" || Model.screening_fo_arr[1] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Sufficient illumination <small>(if work on night)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="2" id="pre-screening-spv-3" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[2] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[2] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[2] == "0" || Model.screening_spv_arr[2] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="2" id="pre-screening-rad-3" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[2] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[2] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[2] == "0" || Model.screening_rad_arr[2] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="2" id="pre-screening-fo-3" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[2] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[2] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[2] == "0" || Model.screening_fo_arr[2] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Is emergency procedure available? <small>(attached if any, emergency shall be approved by WW SHE Official)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="3" id="pre-screening-spv-4" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[3] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[3] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[3] == "0" || Model.screening_spv_arr[3] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="3" id="pre-screening-rad-4" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[3] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[3] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[3] == "0" || Model.screening_rad_arr[3] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="3" id="pre-screening-fo-4" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[3] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[3] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[3] == "0" || Model.screening_fo_arr[3] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Other workers within potential area have been evacuated</td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="4" id="pre-screening-spv-5" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[4] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[4] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[4] == "0" || Model.screening_spv_arr[4] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="4" id="pre-screening-rad-5" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[4] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[4] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[4] == "0" || Model.screening_rad_arr[4] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="4" id="pre-screening-fo-5" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[4] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[4] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[4] == "0" || Model.screening_fo_arr[4] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Available radio communication with facility owner</td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="5" id="pre-screening-spv-6" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[5] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[5] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[5] == "0" || Model.screening_spv_arr[5] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="5" id="pre-screening-rad-6" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[5] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[5] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[5] == "0" || Model.screening_rad_arr[5] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="5" id="pre-screening-fo-6" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[5] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[5] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[5] == "0" || Model.screening_fo_arr[5] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>Available valid RT procedure <small>(copy must be attached)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="6" id="pre-screening-spv-7" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[6] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[6] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[6] == "0" || Model.screening_spv_arr[6] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="6" id="pre-screening-rad-7" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[6] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[6] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[6] == "0" || Model.screening_rad_arr[6] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="6" id="pre-screening-fo-7" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[6] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[6] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[6] == "0" || Model.screening_fo_arr[6] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>Available radiation survey meter with valid calibration record <small>(copy of certificate must be attached)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="7" id="pre-screening-spv-8" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[7] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[7] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[7] == "0" || Model.screening_spv_arr[7] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="7" id="pre-screening-rad-8" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[7] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[7] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[7] == "0" || Model.screening_rad_arr[7] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="7" id="pre-screening-fo-8" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[7] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[7] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[7] == "0" || Model.screening_fo_arr[7] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>Available "film badge exposure recorder" from Batan</td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="8" id="pre-screening-spv-9" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[8] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[8] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[8] == "0" || Model.screening_spv_arr[8] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="8" id="pre-screening-rad-9" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[8] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[8] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[8] == "0" || Model.screening_rad_arr[8] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="8" id="pre-screening-fo-9" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[8] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[8] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[8] == "0" || Model.screening_fo_arr[8] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>10</td>
                    <td>Available "Surat Ijin Pemanfaatan Tenaga Nuklir" from Bapeten <small>(copy must be attached)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="9" id="pre-screening-spv-10" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[9] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[9] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[9] == "0" || Model.screening_spv_arr[9] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="9" id="pre-screening-rad-10" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[9] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[9] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[9] == "0" || Model.screening_rad_arr[9] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="9" id="pre-screening-fo-10" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[9] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[9] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[9] == "0" || Model.screening_fo_arr[9] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>11</td>
                    <td>Available "Quality Control Certificate" of radiographic source from Batan <small>(copy must be attached)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="10" id="pre-screening-spv-11" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[10] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[10] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[10] == "0" || Model.screening_spv_arr[10] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="10" id="pre-screening-rad-11" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[10] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[10] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[10] == "0" || Model.screening_rad_arr[10] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="10" id="pre-screening-fo-11" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[10] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[10] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[10] == "0" || Model.screening_fo_arr[10] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>12</td>
                    <td>Available proper "protection container" from save storage & handling of radiographic source</td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="11" id="pre-screening-spv-12" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[11] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[11] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[11] == "0" || Model.screening_spv_arr[11] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="11" id="pre-screening-rad-12" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[11] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[11] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[11] == "0" || Model.screening_rad_arr[11] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="11" id="pre-screening-fo-12" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[11] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[11] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[11] == "0" || Model.screening_fo_arr[11] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>13</td>
                    <td>Available proper storage & handling of Hazardous (B3) waste of Fixer & Developer chemical, incl.: MSDS <small>(copy must be attached)</small></td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="12" id="pre-screening-spv-13" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[12] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[12] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[12] == "0" || Model.screening_spv_arr[12] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="12" id="pre-screening-rad-13" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[12] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[12] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[12] == "0" || Model.screening_rad_arr[12] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="12" id="pre-screening-fo-13" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[12] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[12] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[12] == "0" || Model.screening_fo_arr[12] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>14</td>
                    <td>Radiographic can be done safely</td>
                    <td>
                        <select class="radiography-select pre-screening-spv" data-id="13" id="pre-screening-spv-14" @(isCanEdit[4] ? "" : "disabled")>
                          <option value="1" @(Model.screening_spv_arr[13] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_spv_arr[13] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_spv_arr[13] == "0" || Model.screening_spv_arr[13] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-rad" data-id="13" id="pre-screening-rad-14" @(isCanEdit[3] ? "" : "disabled")>
                          <option value="1" @(Model.screening_rad_arr[13] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_rad_arr[13] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_rad_arr[13] == "0" || Model.screening_rad_arr[13] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select pre-screening-fo" data-id="13" id="pre-screening-fo-14" @(isCanEdit[6] ? "" : "disabled")>
                          <option value="1" @(Model.screening_fo_arr[13] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.screening_fo_arr[13] == "2" ? "selected" : "")>No</option>
                          <option value="0" @(Model.screening_fo_arr[13] == "0" || Model.screening_fo_arr[13] == "" ? "selected" : "")>N/A</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="5">
                        <h6>Remark : <small><i>(Write any controlling method shall be apply, start with 'Spv:' for Supervisor, start with 'Rad:' for Rad, and start with 'FO:' for FO)</i></small></h6>
                        <span id="pre_remark_required" style="display:none;color:red"></span>
                        <textarea class="table-textarea" id="pre_remark" @(isCanEdit[4] || isCanEdit[3] || isCanEdit[6] ? "" : "disabled")>@(isCanEdit[4] ? Model.pre_remark + "\nSpv: " : (isCanEdit[3] ? Model.pre_remark + "\nRad: " : (isCanEdit[6] ? Model.pre_remark + "\nFO: " : Model.pre_remark)))</textarea>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row-fluid">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th colspan="5" class="title-form">
                        <b>3. APPROVAL</b>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2" class="td-centre">
                        <strong>Radiographic</strong>
                    </td>
                    <td rowspan="2" class="td-centre">
                        <strong>Supervisor</strong>
                    </td>
                    <td rowspan="2" class="td-centre">
                        <strong>Safety Officer</strong>
                    </td>
                    <td rowspan="2" class="td-centre">
                        <strong>Facility Owner</strong>
                    </td>
                </tr>
                <tr>
                    <td class="td-centre">
                        <strong>Operator</strong>
                    </td>
                    <td class="td-centre">
                        <strong>Level 2</strong>
                    </td>
                </tr>
                <tr>
                    <td class="td-centre">
                        @if (Model.operator_signature != null)
                        {
                        <img id="img_approve_operator" width="50" height="50" @(Model.operator_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.operator_signature == null ? "" : Model.operator_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.radiographer_2_signature != null)
                        {
                        <img id="img_approve_radiographer" width="50" height="50" @(Model.radiographer_2_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.radiographer_2_signature == null ? "" : Model.radiographer_2_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.supervisor_signature != null)
                        {
                        <img id="img_approve_supervisor" width="50" height="50" @(Model.supervisor_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.supervisor_signature == null ? "" : Model.supervisor_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.safety_officer_signature != null)
                        {
                        <img id="img_approve_safety_officer" width="50" height="50" @(Model.safety_officer_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.safety_officer_signature == null ? "" : Model.safety_officer_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.facility_owner_signature != null)
                        {
                        <img id="img_approve_facility_owner" width="50" height="50" @(Model.facility_owner_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.facility_owner_signature == null ? "" : Model.facility_owner_signature.Substring(1))"/><br />
                        }
                    </td>
                </tr>
                <tr>
                    <td class="td-centre">
                        @if ((Model.operator_signature == null && isCanEdit[2] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString()].id))
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.operator_signature != null && Model.operator_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1DELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @if (Model.userInRadiography.Keys.ToList().Exists(p => p == PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString())) {
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString()].alpha_name : "")
                        }
                    </td>
                    <td class="td-centre">
                        @if ((Model.radiographer_2_signature == null && isCanEdit[3] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString()].id))
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.radiographer_2_signature != null && Model.radiographer_2_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2DELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @if (Model.userInRadiography.Keys.ToList().Exists(p => p == PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString())) {
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString()].alpha_name : "")
                        }
                    </td>
                    <td class="td-centre">
                        @if ((Model.supervisor_signature == null && isCanEdit[4] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()].id))
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.supervisor_signature != null && Model.supervisor_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISORDELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()].alpha_name : "")
                    </td>
                    <td class="td-centre">
                        @if (isCanEdit[1])
                        {
                            @(Html.DropDownList("safety_officer", ViewBag.listSafetyOfficer as List<SelectListItem>, (isCanEdit[1] ? new { @class = "table-input-170" } as object : new { @class = "table-input-170", disabled = "disabled" } as object)));
                        }
                        else
                        {
                            if ((Model.safety_officer_signature == null && isCanEdit[5] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICER.ToString()].id))
                            {
                            <text>@requestor.alpha_name<br />a/n </text>
                            }
                            else if ((Model.safety_officer_signature != null && Model.safety_officer_signature.Substring(0, 1) == "d"))
                            {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICERDELEGATE.ToString()].alpha_name<br />a/n </text>
                            }
                            @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICER.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICER.ToString()].alpha_name : "")
                        }
                    </td>
                    <td class="td-centre">
                        @if ((Model.facility_owner_signature == null && isCanEdit[6]) && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNER.ToString()].id)
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.facility_owner_signature != null && Model.facility_owner_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNERDELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNER.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNER.ToString()].alpha_name : "")
                    
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    @if (Model.status >= (int)PermitToWork.Models.Radiography.RadEntity.RadStatus.CLOSING)
    {
    <div class="row-fluid">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="title-form" colspan="6">
                        <b>4. CANCELATION SCREENING</b> <small><i>It must be completed by certified radiographer Level 2. If any of the below can't be satisfied the work will not be permitted. Project manager acknowledge at the ack column as agreement with hazard screening. 
                            Fill : yes if agree, no if disagree, N/A if not applicable with statement on description column; Spv : Supervisor; Rad : Radiographic engineer / level-2; FO : facility owner</i></small>
                    </th>
                    
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>No</strong></td>
                    <td><strong>Description</strong></td>
                    <td><strong>SPV</strong></td>
                    <td><strong>RAD</strong></td>
                    <td><strong>FO</strong></td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Radiographic job have been completed <small>(Radiatioan survey by valid calibrated meter have been done)</small></td>
                    <td>
                        <select class="radiography-select can-screening-spv" data-id="0" id="can-screening-spv-1" @(isCanEdit[10] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_spv_arr[0] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_spv_arr[0] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_spv_arr[0] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select can-screening-rad" data-id="0" id="can-screening-rad-1" @(isCanEdit[9] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_rad_arr[0] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_rad_arr[0] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_rad_arr[0] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select can-screening-fo" data-id="0" id="can-screening-fo-1" @(isCanEdit[12] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_fo_arr[0] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_fo_arr[0] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_fo_arr[0] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Work location have been secure from any waste and residual of radio active material?</td>
                    <td>
                        <select class="radiography-select can-screening-spv" data-id="1" id="can-screening-spv-2" @(isCanEdit[10] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_spv_arr[1] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_spv_arr[1] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_spv_arr[1] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select can-screening-rad" data-id="1" id="can-screening-rad-2" @(isCanEdit[9] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_rad_arr[1] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_rad_arr[1] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_rad_arr[1] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select can-screening-fo" data-id="1" id="can-screening-fo-2" @(isCanEdit[12] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_fo_arr[1] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_fo_arr[1] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_fo_arr[1] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Radio active material manifest document has been completed</td>
                    <td>
                        <select class="radiography-select can-screening-spv" data-id="2" id="can-screening-spv-3" @(isCanEdit[10] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_spv_arr[2] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_spv_arr[2] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_spv_arr[2] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select can-screening-rad" data-id="2" id="can-screening-rad-3" @(isCanEdit[9] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_rad_arr[2] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_rad_arr[2] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_rad_arr[2] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                    <td>
                        <select class="radiography-select can-screening-fo" data-id="2" id="can-screening-fo-3" @(isCanEdit[12] ? "" : "disabled")>
                          <option value="0" @(Model.can_screening_fo_arr[2] == "0" ? "selected" : "")>N/A</option>
                          <option value="1" @(Model.can_screening_fo_arr[2] == "1" ? "selected" : "")>Yes</option>
                          <option value="2" @(Model.can_screening_fo_arr[2] == "2" ? "selected" : "")>No</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="5">
                        <h6>Remark : <small><i>(Write any controlling method shall be apply, start with 'Spv:' for Supervisor, start with 'Rad:' for Rad, and start with 'FO:' for FO)</i></small></h6>
                        <span id="can_remark_required" style="display:none;color:red"></span>
                        <textarea class="table-textarea" id="can-remark" @(isCanEdit[9] || isCanEdit[12] || isCanEdit[10] ? "" : "disabled")>@(isCanEdit[9] ? Model.can_remark + "\nRad: " : (isCanEdit[10] ? Model.can_remark + "\nSpv: " : (isCanEdit[12] ? Model.can_remark + "\nFO: " : Model.can_remark)))</textarea>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row-fluid">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th colspan="5" class="title-form">
                        <b>4. CLOSED</b> <small><i>Note: by sign this section Radiographic engineer have been declare that all radiation material have been secure in proper condition and work area have been clear from radiographic potential hazard, Radiographer Level 2 responsible to proper disposal any radiation material and documentation of usage radiation material.</i></small>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2" class="td-centre">
                        <strong>Radiographic</strong>
                    </td>
                    <td rowspan="2" class="td-centre">
                        <strong>Supervisor</strong>
                    </td>
                    <td rowspan="2" class="td-centre">
                        <strong>Safety Officer</strong>
                    </td>
                    <td rowspan="2" class="td-centre">
                        <strong>Facility Owner</strong>
                    </td>
                </tr>
                <tr>
                    <td class="td-centre">
                        <strong>Operator</strong>
                    </td>
                    <td class="td-centre">
                        <strong>Level 2</strong>
                    </td>
                </tr>
                <tr>
                    <td class="td-centre">
                        @if (Model.can_operator_signature != null)
                        {
                        <img id="img_approve_cancel_operator" width="50" height="50" @(Model.can_operator_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_operator_signature == null ? "" : Model.can_operator_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.can_radiographer_2_signature != null)
                        {
                        <img id="img_approve_cancel_radiographer" width="50" height="50" @(Model.can_radiographer_2_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_radiographer_2_signature == null ? "" : Model.can_radiographer_2_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.can_supervisor_signature != null)
                        {
                        <img id="img_approve_cancel_supervisor" width="50" height="50" @(Model.can_supervisor_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_supervisor_signature == null ? "" : Model.can_supervisor_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.can_safety_officer_signature != null)
                        {
                        <img id="img_approve_cancel_so" width="50" height="50" @(Model.can_safety_officer_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_safety_officer_signature == null ? "" : Model.can_safety_officer_signature.Substring(1))"/><br />
                        }
                    </td>
                    <td class="td-centre">
                        @if (Model.can_fo_signature != null)
                        {
                        <img id="img_approve_cancel_fo" width="50" height="50" @(Model.can_fo_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_fo_signature == null ? "" : Model.can_fo_signature.Substring(1))"/><br />
                        }
                    </td>
                </tr>
                <tr>
                    <td class="td-centre">
                        @if ((Model.can_operator_signature == null && isCanEdit[14] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString()].id))
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.can_operator_signature != null && Model.can_operator_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.CANRADIOGRAPHER1DELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER1.ToString()].alpha_name : "")
                    </td>
                    <td class="td-centre">
                        @if ((Model.can_radiographer_2_signature == null && isCanEdit[15] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString()].id))
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.can_radiographer_2_signature != null && Model.can_radiographer_2_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.CANRADIOGRAPHER2DELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.RADIOGRAPHER2.ToString()].alpha_name : "")
                    </td>
                    <td class="td-centre">
                        @if ((Model.can_supervisor_signature == null && isCanEdit[16] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()].id))
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.can_supervisor_signature != null && Model.can_supervisor_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.CANSUPERVISORDELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SUPERVISOR.ToString()].alpha_name : "")
                    </td>
                    <td class="td-centre">
                        @if ((Model.can_safety_officer_signature == null && isCanEdit[17] && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICER.ToString()].id))
                        {
                        <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.can_safety_officer_signature != null && Model.can_safety_officer_signature.Substring(0, 1) == "d"))
                        {
                        <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.CANSAFETYOFFICERDELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICER.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.SAFETYOFFICER.ToString()].alpha_name : "")
                    </td>
                    <td class="td-centre">
                        @if ((Model.can_fo_signature == null && isCanEdit[18]) && requestor.id != Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNER.ToString()].id)
                        {
                            <text>@requestor.alpha_name<br />a/n </text>
                        }
                        else if ((Model.can_fo_signature != null && Model.can_fo_signature.Substring(0, 1) == "d"))
                        {
                            <text>@Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.CANFACILITYOWNERDELEGATE.ToString()].alpha_name<br />a/n </text>
                        }
                        @(Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNER.ToString()] != null ? Model.userInRadiography[PermitToWork.Models.Radiography.RadEntity.UserInRadiography.FACILITYOWNER.ToString()].alpha_name : "")
                    
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    }
    <div class="row-fluid">
        <div class="span12">
            Attachment(s)
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <input name="files" id="file-attachment" type="file" class="radiography-file" />
            <ul id="existing-files-attachment" class="k-upload-files k-reset" style="display: none;">
                @foreach (string file in Model.listDocumentUploaded[PermitToWork.Models.Radiography.RadEntity.DocumentUploaded.ATTACHMENT.ToString()])
                {
                <li class="k-file" data-att-id="@(file)">
                    <span class="k-icon k-success">uploaded</span>
                    <span class="k-filename" title="@(file)"><a href="@Url.Content("~/Upload/Radiography/" + Model.id + "/Attachment/" + file)" target="_blank">@file</a><span class="k-progress"><span class="k-state-selected k-progress-status" style="width: 100%;"></span></span></span>
                    <button type="button" class="k-button k-button-icontext k-upload-action" @(isCanEdit[0] ? "" : "disabled")><span class="k-icon k-delete"></span>Remove</button>
                </li>
                }
            </ul>
        </div>

    </div>
    <div class="row-fluid">
        <div class="spann12">&nbsp;</div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            @if (isCanEdit[0] || isCanEdit[2] || isCanEdit[3] || isCanEdit[4] || isCanEdit[5] || isCanEdit[6])
            {
            <button class="btn btn-success" id="save-send" data-who="@(isCanEdit[0] ? 1 : (isCanEdit[2] ? 2 : (isCanEdit[3] ? 3 : (isCanEdit[4] ? 4 : (isCanEdit[5] ? 5 : (isCanEdit[6] ? 6 : 0))))))">Save and Send Email</button>  
            if (isCanEdit[0] || isCanEdit[3] || isCanEdit[4] || isCanEdit[6]) {
            <button class="btn btn-default" id="save-as-draft" data-who="@(isCanEdit[0] ? 1 : (isCanEdit[2] ? 2 : (isCanEdit[3] ? 3 : (isCanEdit[4] ? 4 : (isCanEdit[5] ? 5 : (isCanEdit[6] ? 6 : 0))))))">Save as Draft</button>
            }
            if (isCanEdit[2] || isCanEdit[3] || isCanEdit[4] || isCanEdit[5] || isCanEdit[6]) {
            <button class="btn btn-danger" id="reject" data-who="@(isCanEdit[0] ? 1 : (isCanEdit[2] ? 2 : (isCanEdit[3] ? 3 : (isCanEdit[4] ? 4 : (isCanEdit[5] ? 5 : (isCanEdit[6] ? 6 : 0))))))">Reject</button>
            }
            }
            @if (isCanEdit[1])
            {
            <button class="btn btn-success" id="save-so">Save Safety Officer</button> 
            }
            @if (isCanEdit[7])
            {
            <button class="btn btn-danger" id="closing">Cancel Radiography Clearance Permit</button>
            }
            @if (isCanEdit[8] || isCanEdit[9] || isCanEdit[10] || isCanEdit[11] || isCanEdit[12])
            {
            <button class="btn btn-success" id="save-send-2" data-who="@(isCanEdit[8] ? 2 : (isCanEdit[9] ? 3 : (isCanEdit[10] ? 4 : (isCanEdit[11] ? 5 : (isCanEdit[12] ? 6 : 0)))))">Save and Send Email</button>  
            if (isCanEdit[9] || isCanEdit[10] || isCanEdit[12]) {
            <button class="btn btn-default" id="save-as-draft-2" data-who="@(isCanEdit[8] ? 2 : (isCanEdit[9] ? 3 : (isCanEdit[10] ? 4 : (isCanEdit[11] ? 5 : (isCanEdit[12] ? 6 : 0)))))">Save as Draft</button>
            }
            if (isCanEdit[9] || isCanEdit[10] || isCanEdit[11] || isCanEdit[12]) {
            <button class="btn btn-danger" id="reject-2" data-who="@(isCanEdit[8] ? 2 : (isCanEdit[9] ? 3 : (isCanEdit[10] ? 4 : (isCanEdit[11] ? 5 : (isCanEdit[12] ? 6 : 0)))))">Reject</button>
            }
            }
            <button class="btn btn-primary" id="back">Back</button>
            <span id="loading_gif" style="display:none"><img src="/Content/Images/loading.gif" alt="loading" width="24" height="24" /> Sending Email.. Please Wait..</span>
        </div>
    </div>
</div>

<!-- Modal -->
<div id="rejection" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="Reject" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="Reject">Reject</h3>
  </div>
  <div class="modal-body">
    <label for="comment">Comment</label><textarea id="comment"></textarea>
    <input type="hidden" id="type-reject" value="0" />
      <input type="hidden" id="who" value="0" />
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" id="reject_button">Reject</button>
    <span id="loading_reject" style="display:none"><img src="/Content/Images/loading.gif" alt="loading" width="24" height="24" /> Sending Email.. Please Wait..</span>
  </div>
</div>